<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>404 Page Not Found</title>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&display=swap" rel="stylesheet" />
  <link href="/css/404-page.css" rel="stylesheet" />

  <link rel="icon" type="image/png" href="/images/Favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/images/Favicon/favicon.svg" />
  <link rel="shortcut icon" href="/images/Favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/Favicon/apple-touch-icon.png" />
  <link rel="manifest" href="/images/Favicon/site.webmanifest" />
</head>

<body>
  <div class="container">
    <h1>404</h1>
    <picture>
      <source id="webpSource" type="image/webp" onerror="this.srcset=''" />
      <img id="myPicture" style="opacity: 0" alt="404 error image" />
    </picture>
    <p class="message" id="randomText"></p>
    <a href="/" data-i18n="returnHome">Return Home</a>
  </div>
  <script defer src="/js/translate.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const myPixWebp = ["/images/webp/404Images/player-dead.webp", "/images/webp/404Images/player-sticker.webp", "/images/webp/404Images/roomba-bomb-sticker.webp", "/images/webp/404Images/slimeKing.webp", "/images/webp/404Images/slime.webp", "/images/webp/404Images/punchingslimes.webp"];
      const myPixPng = ["/images/png/404Images/player-dead.png", "/images/png/404Images/player-sticker.png", "/images/png/404Images/roomba-bomb-sticker.png", "/images/png/404Images/slimeKing.png", "/images/png/404Images/slime.png", "/images/png/404Images/punchingslimes.png"];
      const translate = ["playerDead", "player", "roombaBomb", "slimeKing", "slime", "punchingSlimes"];

      const randomNum = Math.floor(Math.random() * myPixWebp.length);
      const webpSource = document.getElementById("webpSource");
      const myPicture = document.getElementById("myPicture");
      const randomText = document.getElementById("randomText");

      // Load both images to verify they exist
      const webpImg = new Image();
      const pngImg = new Image();

      webpImg.onerror = function () {
        // If WebP fails, ensure we use PNG
        webpSource.srcset = "";
        myPicture.src = myPixPng[randomNum];
      };

      webpImg.onload = function () {
        webpSource.srcset = myPixWebp[randomNum];
        myPicture.src = myPixPng[randomNum];
      };

      // Start loading WebP
      webpImg.src = myPixWebp[randomNum];
      myPicture.style.opacity = "1";
      randomText.setAttribute("data-i18n", translate[randomNum]);

      const savedLang = localStorage.getItem("preferredLanguage") || "en";
      updateContent(savedLang);
    });
  </script>
</body>

</html>