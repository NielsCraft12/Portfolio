<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>404 Page Not Found</title>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&display=swap" rel="stylesheet" />
  <link href="../css/404-page.css" rel="stylesheet" />

  <link rel="icon" type="image/png" href="/images/Favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/images/Favicon/favicon.svg" />
  <link rel="shortcut icon" href="/images/Favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/Favicon/apple-touch-icon.png" />
  <link rel="manifest" href="/images/Favicon/site.webmanifest" />
</head>

<body>
  <div class="container">
    <h1>404</h1>
    <picture>
      <source id="webpSource" type="image/webp" />
      <img id="myPicture" alt="404 error image" />
    </picture>
    <p class="message" id="randomText"></p>
    <a href="/" data-i18n="error404.returnHome">Return Home</a>
  </div>

  <script>
    // Generate random number immediately
    const randomNum = Math.floor(Math.random() * 8); // 8 images total

    // Set up image paths
    const myPixWebp = ["../images/webp/404Images/player-dead.webp", "../images/webp/404Images/player-sticker.webp", "../images/webp/404Images/roomba-bomb-sticker.webp", "../images/webp/404Images/slimeKing.webp", "../images/webp/404Images/slime.webp", "../images/webp/404Images/punchingslimes.webp", "../images/webp/404Images/Gayliensticker.webp", "../images/webp/404Images/DinoSticker.webp"];
    const myPixPng = ["../images/png/404Images/player-dead.png", "../images/png/404Images/player-sticker.png", "../images/png/404Images/roomba-bomb-sticker.png", "../images/png/404Images/slimeKing.png", "../images/png/404Images/slime.png", "../images/png/404Images/punchingslimes.png", "../images/png/404Images/Gayliensticker.png", "../images/png/404Images/DinoSticker.png"];
    const translate = ["error404.playerDead", "error404.player", "error404.roombaBomb", "error404.slimeKing", "error404.slime", "error404.punchingSlimes", "error404.gaylien", "error404.dino"];

    // Set image sources immediately
    document.getElementById("webpSource").srcset = myPixWebp[randomNum];
    document.getElementById("myPicture").src = myPixPng[randomNum];

    document.addEventListener("DOMContentLoaded", function () {
      const randomText = document.getElementById("randomText");
      randomText.setAttribute("data-i18n", translate[randomNum]);

      // Wait for translation module to load and then update content
      const savedLang = localStorage.getItem("preferredLanguage") || "en";

      // Check if updateContent is available, if not wait for it
      function tryUpdateContent() {
        if (window.updateContent && typeof window.updateContent === 'function') {
          updateContent(savedLang);
        } else {
          // Wait a bit and try again
          setTimeout(tryUpdateContent, 50);
        }
      }

      tryUpdateContent();
    });
  </script>
  <script type="module" defer src="/js/translate.js"></script>
  <script data-goatcounter="https://nielsdelaat.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>

</html>